import{s as n,n as t}from"./index.6c9ca8d6.js";const s=[];function e(n,t){return{subscribe:c(n,t).subscribe}}function c(e,c=t){let o;const r=[];function u(t){if(n(e,t)&&(e=t,o)){const n=!s.length;for(let n=0;n<r.length;n+=1){const t=r[n];t[1](),s.push(t,e)}if(n){for(let n=0;n<s.length;n+=2)s[n][0](s[n+1]);s.length=0}}}return{set:u,update:function(n){u(n(e))},subscribe:function(n,s=t){const i=[n,s];return r.push(i),1===r.length&&(o=c(u)||t),n(e),()=>{const n=r.indexOf(i);-1!==n&&r.splice(n,1),0===r.length&&(o(),o=null)}}}}export{e as r,c as w};
